<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>晓江南的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="blog.xiaojn.cn">
<meta property="og:type" content="website">
<meta property="og:title" content="晓江南的博客">
<meta property="og:url" content="https://evanqiao.github.io/xiaojn-blog/index.html">
<meta property="og:site_name" content="晓江南的博客">
<meta property="og:description" content="blog.xiaojn.cn">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="晓江南的博客">
<meta name="twitter:description" content="blog.xiaojn.cn">
  
    <link rel="alternate" href="/atom.xml" title="晓江南的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/xiaojn-blog/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  

</head>
</html>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/xiaojn-blog/" id="logo">晓江南的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/xiaojn-blog/" id="subtitle">Hope is a good thing!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/xiaojn-blog/">Home</a>
        
          <a class="main-nav-link" href="/xiaojn-blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://evanqiao.github.io/xiaojn-blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-NOIP2013_2表达式求值" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/xiaojn-blog/2017/07/30/NOIP2013_2表达式求值/" class="article-date">
  <time datetime="2017-07-30T05:17:45.000Z" itemprop="datePublished">2017-07-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xiaojn-blog/categories/我学编程/">我学编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/xiaojn-blog/2017/07/30/NOIP2013_2表达式求值/">NOIP2013表达式求值</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>【题目描述】</p>
<p>给定一个只包含加法和乘法的算术表达式，请你编程计算表达式的值。<br>【输入格式】</p>
<p>输入仅有一行，为需要你计算的表达式，表达式中只包含数字、加法运算符“+”和乘法运算符“<em>”，且没有括号，所有参与运算的数字均为0到2^31-1之间的整数。输入数据保证这一行只有0~9、+、</em>这12种字符。</p>
<p>【输出格式】<br>输出只有一行，包含一个整数，表示这个表达式的值。注意：当答案长度多于4位时，请只输出最后4位，前导0不输出。<br>【样例输入1】<br>1+1*3+4</p>
<p>【样例输出1】<br>8</p>
<p>【样例输入2】<br>1+1234567890*1</p>
<p>【样例输出2】<br>7891</p>
<p>【样例输入3】<br>1+1000000003*1</p>
<p>【样例输出3】<br>4</p>
<p>【样例解释】<br>样例1计算的结果为8，直接输出8。<br>样例2计算的结果为1234567891，输出后4位，即7891。<br>样例3计算的结果为1000000004，输出后4位，即4。</p>
<p>【数据规模】<br>对于30%的数据，0≤表达式中加法运算符和乘法运算符的总数≤100；<br>对于80%的数据，0≤表达式中加法运算符和乘法运算符的总数≤1000；<br>对于100%的数据，0≤表达式中加法运算符和乘法运算符的总数≤100000。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>建立两个栈，一个存放操作数，一个存放操作符，遇到操作数全部入栈，遇到操作符，判断优先级，如果栈顶操作符的优先级大于当前操作符的优先级，则操作数栈弹出两个操作数，操作符栈弹出一个操作符，进行运算，运算结果放入操作数栈中，如果栈顶操作符的优先级小于当前操作符的优先级，则继续入栈。可以在表达式的前后加上两个‘#’号，在前后两个‘#’号相遇时，循环结束。</p>
<h2 id="代码一"><a href="#代码一" class="headerlink" title="代码一"></a>代码一</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by qyh-mac on 2017/7/29.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    freopen(<span class="string">"expr2013.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"expr2013.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; S;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; SS;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; s.size()) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isdigit</span>(s[i])) &#123;</span><br><span class="line">            num = num * <span class="number">10</span> + s[i++] - <span class="string">'0'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            S.push(num);</span><br><span class="line">            num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(SS.empty()) &#123;</span><br><span class="line">                SS.push(s[i++]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(SS.top() == <span class="string">'+'</span> &amp;&amp; s[i] == <span class="string">'*'</span>) &#123;</span><br><span class="line">                    SS.push(s[i++]);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">int</span> a = S.top();</span><br><span class="line">                    S.pop();</span><br><span class="line">                    <span class="keyword">int</span> b = S.top();</span><br><span class="line">                    S.pop();</span><br><span class="line">                    <span class="keyword">char</span> op = SS.top();</span><br><span class="line">                    SS.pop();</span><br><span class="line">                    SS.push(s[i++]);</span><br><span class="line">                    <span class="keyword">long</span> <span class="keyword">long</span> res = (op == <span class="string">'+'</span>) ? (a + b) : (a * b);</span><br><span class="line">                    S.push(res % <span class="number">10000</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    S.push(num);</span><br><span class="line">    <span class="keyword">while</span>(!SS.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> a = S.top();</span><br><span class="line">        S.pop();</span><br><span class="line">        <span class="keyword">int</span> b = S.top();</span><br><span class="line">        S.pop();</span><br><span class="line">        <span class="keyword">char</span> op = SS.top();</span><br><span class="line">        SS.pop();</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> res = (op == <span class="string">'+'</span>) ? (a + b) : (a * b);</span><br><span class="line">        S.push(res % <span class="number">10000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; S.top() % <span class="number">10000</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="代码二"><a href="#代码二" class="headerlink" title="代码二"></a>代码二</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by qyh-mac on 2017/7/30.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    freopen(<span class="string">"expr2013.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"expr2013.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; opnd;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; optr;</span><br><span class="line">    optr.push(<span class="string">'#'</span>);</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    s.append(<span class="number">1</span>, <span class="string">'#'</span>);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; s.size() || optr.top() != <span class="string">'#'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isdigit</span>(s[i])) &#123;</span><br><span class="line">            num = num * <span class="number">10</span> + s[i++] - <span class="string">'0'</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            opnd.push(num % <span class="number">10000</span>);</span><br><span class="line">            num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(optr.size() &lt; <span class="number">2</span> || (optr.top() == <span class="string">'+'</span> &amp;&amp; s[i] == <span class="string">'*'</span>)) &#123;</span><br><span class="line">                optr.push(s[i++]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> a = opnd.top();</span><br><span class="line">                opnd.pop();</span><br><span class="line">                <span class="keyword">int</span> b = opnd.top();</span><br><span class="line">                opnd.pop();</span><br><span class="line">                <span class="keyword">char</span> op = optr.top();</span><br><span class="line">                optr.pop();</span><br><span class="line">                num = (op == <span class="string">'+'</span>) ? (a + b) : (a * b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; opnd.top() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://evanqiao.github.io/xiaojn-blog/2017/07/30/NOIP2013_2表达式求值/" data-id="cjxbtu1np000jqo67ptrwb8wl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xiaojn-blog/tags/Algorithm/">Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-NOIP2012_02寻宝" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/xiaojn-blog/2017/07/30/NOIP2012_02寻宝/" class="article-date">
  <time datetime="2017-07-30T05:17:45.000Z" itemprop="datePublished">2017-07-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xiaojn-blog/categories/我学编程/">我学编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/xiaojn-blog/2017/07/30/NOIP2012_02寻宝/">NOIP2012寻宝</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>【题目描述】<br>传说很遥远的藏宝楼顶层藏着诱人的宝藏。小明历尽千辛万苦终于找到传说中的这个藏宝楼，藏宝楼的门口竖着一个木板，上面写有几个大字：寻宝说明书。说明书的内容如下： 藏宝楼共有N+1层，最上面一层是顶层，顶层有一个房间里面藏着宝藏。除了顶层外，藏宝楼另有 N 层，每层 M 个房间，这M个房间围成一圈并按逆时针方向依次编号为0，…，M-1。其中一些房间有通往上一层的楼梯，每层楼的楼梯设计可能不同。每个房间里有一个指示牌，指示牌上有一个数字x，表示从这个房间开始按逆时针方向选择第x个有楼梯的房间（假定该房间的编号为k），从该房间上楼，上楼后到达上一层的k号房间。比如当前房间的指示牌上写着2，则按逆时针方向开始尝试，找到第2个有楼梯的房间，从该房间上楼。如果当前房间本身就有楼梯通向上层，该房间作为第一个有楼梯的房间。<br>    寻宝说明书的最后用红色大号字体写着：“寻宝须知：帮助你找到每层上楼房间的指示牌上的数字（即每层第一个进入的房间内指示牌上的数字）总和为打开宝箱的密钥”。<br>请帮助小明算出这个打开宝箱的密钥。</p>
<p>【输入格式】<br>第一行2个整数N和M，之间用一个空格隔开。N表示除了顶层外藏宝楼共N层楼，M表示除顶层外每层楼有M个房间。<br>    接下来 N<em>M 行，每行两个整数，之间用一个空格隔开，每行描述一个房间内的情况，其中第(i-1)</em>M+j 行表示第i 层j-1号房间的情况（i=1, 2, …, N；j=1, 2, … ,M）。第一个整数表示该房间是否有楼梯通往上一层（0表示没有，1表示有），第二个整数表示指示牌上的数字。注意，从j号房间的楼梯爬到上一层到达的房间一定也是j号房间。<br>最后一行，一个整数，表示小明从藏宝楼底层的几号房间进入开始寻宝（注：房间编号从0开始）。</p>
<p>【输出格式】<br>输出只有一行，一个整数，表示打开宝箱的密钥，这个数可能会很大，请输出对20123取模的结果即可。</p>
<p>【输入输出样例】<br>treasures.in<br>2 3<br>1 2<br>0 3<br>1 4<br>0 1<br>1 5<br>1 2<br>1
treasures.out<br>5
【输入输出样例说明】<br>第一层：<br> 0号房间，有楼梯通往上层，指示牌上的数字是2；<br> 1号房间，无楼梯通往上层，指示牌上的数字是3；<br> 2号房间，有楼梯通往上层，指示牌上的数字是4；<br>第二层：<br> 0号房间，无楼梯通往上层，指示牌上的数字是1；<br> 1号房间，有楼梯通往上层，指示牌上的数字是5；<br> 2号房间，有楼梯通往上层，指示牌上的数字是2；<br>小明首先进入第一层（底层）的1号房间，记下指示牌上的数字为3，然后从这个房间开始，沿逆时针方向选择第3个有楼梯的房间2号房间进入，上楼后到达第二层的2号房间，记下指示牌上的数字为2，由于当前房间本身有楼梯通向上层，该房间作为第一个有楼梯的房间。因此，此时沿逆时针方向选择第2个有楼梯的房间即为1号房间，进入后上楼梯到达顶层。这时把上述记下的指示牌上的数字加起来，即3+2=5，所以打开宝箱的密钥就是5。</p>
<p>【数据规模】<br>对于50%数据，有0&lt;N≤1000，0&lt;x≤10000；<br>对于100%数据，有0&lt;N≤10000，0&lt;M≤100，0&lt;x≤1,000,000。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>模拟寻找宝藏的过程，从底层开始，依次上楼，在这个过程中保存在每一层的第一个进去的房间里指示牌上的数字，并加到sum变量上，同时根据指示牌上的数字（flagNo），逆序寻找下一层的房间号，这里寻找房间比较费时间，如果指示牌上的数字远远大于每层有电梯的房间数，则要循环很多次才能找到逆序的第flagNo个有电梯的房间，所以这里的做法是在输入的时候，统计每层有电梯的房间总数，存放在一维数组中。寻找房间用下面几行代码就可以在一次循环内找到下一层对应的房间。算法的时间复杂度是O(n*m)。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by qyh-mac on 2017/7/29.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="keyword">bool</span> hasStair;</span><br><span class="line">    <span class="keyword">int</span> number;</span><br><span class="line">&#125; Room;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    freopen(<span class="string">"treasures.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"treasures.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;Room&gt; &gt; table(n, <span class="built_in">vector</span>&lt;Room&gt;(m));</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; roomsHasStairPerFloor(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; table[i][j].hasStair &gt;&gt; table[i][j].number;</span><br><span class="line">            <span class="keyword">if</span>(table[i][j].hasStair)</span><br><span class="line">                ++temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 记录每层一共有多少个房间有电梯</span></span><br><span class="line">        roomsHasStairPerFloor[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> roomNo;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; roomNo;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> flagNo = table[i][roomNo].number;</span><br><span class="line">        sum += flagNo;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> j = roomNo;</span><br><span class="line">        <span class="comment">// 简化找房间的过程。防止因指示牌上的数字过大而导致循环次数增多</span></span><br><span class="line">        <span class="keyword">int</span> temp = (flagNo + roomsHasStairPerFloor[i]) % roomsHasStairPerFloor[i];</span><br><span class="line">        <span class="keyword">if</span>(temp == <span class="number">0</span>)</span><br><span class="line">            temp = roomsHasStairPerFloor[i];</span><br><span class="line">        <span class="keyword">while</span>(count &lt; temp) &#123;</span><br><span class="line">            <span class="keyword">if</span>(table[i][(j + m) % m].hasStair)</span><br><span class="line">                count++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        roomNo = (j + m - <span class="number">1</span>) % m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; sum % <span class="number">20123</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://evanqiao.github.io/xiaojn-blog/2017/07/30/NOIP2012_02寻宝/" data-id="cjxbtu1nl000fqo67m43ap3gn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xiaojn-blog/tags/Algorithm/">Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-斜挎包的聚会" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/xiaojn-blog/2017/06/05/斜挎包的聚会/" class="article-date">
  <time datetime="2017-06-05T13:17:45.000Z" itemprop="datePublished">2017-06-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xiaojn-blog/categories/文清说/">文清说</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/xiaojn-blog/2017/06/05/斜挎包的聚会/">跨斜包的聚会</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=3950792&auto=0&height=66"></iframe>
<font size="4" face="宋体">&emsp;&emsp;六月终于开始了，曾经在内心期盼了好久。黑暗的五月过去拥抱充满阳光的六月天，好开心。只是这个阳光有点太过热情，难免给人一种灼热感。
&emsp;&emsp;每次我想要码字的时候不是心情过于平静就是过于无聊或者刚兴奋完。而这次是因为无聊？我也不知道，只是感觉心里有很多很多想要说的话，好像要把它记录下来，我担心，担心过段时间就忘了，就更不要说多少多少年之后了。如果这样的话该多么可惜呢，你说对不对？
&emsp;&emsp;最近在读《人生若只如初见》，看完觉得好暖好浪漫。那些大才子大诗人的爱情故事以及所谓的创作灵感，无一不让你感动或动情。衣带渐宽终不悔，为伊消的人憔悴的无悔；十百千万中无亿（忆）的无情与变心；欲把西湖比西子，淡妆浓抹总相宜中对暗恋女子表达的思慕；沈园粉壁上《钗头凤》的无奈于悲伤。每次看到这种作品的时候都会感叹文字的魅力，一看感觉句句都很喜欢，只是可惜的是每次看完都很快就会忘记，记忆中只有模模糊糊的一个影子，好像在哪看过，但是具体的内容却再也想不起来。Q先生多次提醒我要做笔记，要不的话这种现象会一直持续下去。可是每次好像都有各种借口去逃避做这些事情。想来也是，只是看看不用费脑子不用干活多舒服。只是得到一些的同时难免会错失另外一些。
![ ](http://img4q.duitang.com/uploads/blog/201408/12/20140812091648_WijPU.jpeg)
&emsp;&emsp;我想说说最近，最近的假期好多。五月以端午节结束，三天的假期。没有出去在学校待着也蛮舒服的，炎热的天气，对于我这种比较宅的人来说待在室内发发呆就是最好的选择。虽然我也抱怨男票不带我出去玩，但是那也只是说说而已。其实倒不是说抱怨不带我出去玩只是不想一个人待着连男票都不陪我。所以端午的三天假，有一天是用来工作的，两天和我家的Q先生在一起。最后一天530还是我家Q先生的生日，事情太巧，一直以来生日都是过农历的，可是今年却偏偏没有农历的530.这是在考验我吗？然而我却什么都没有准备，然后稀里糊涂的就这么过去了。在一起过的第一个生日就这么过去了，但是像我这种这么温柔体贴贤惠的人怎么会就这样过去呢？肯定要想办法的咯，只是目前这个办法还没有想好，就算想好了我也不能提前告诉你呀，哈哈！
&emsp;&emsp;你看，六月开始的第一天就是六一儿童节。在这之前的一个星期我就嚷嚷着宝宝要过儿童节要礼物。其实也没有太当真，只不过是顺着节日的气氛撒个娇嘛~而且那天是周四，Q先生要去上班的，没有空陪我~其实还是有一点点小失落的，直到当天，周四。我坐在教室心神不宁的等着上课，为什么心神不宁呢？因为我在等他的消息，他有个习惯，就是一忙起来好像就忘了有我的存在，有些时候一整天都不给我消息，到晚上好晚了才会想起来问我在干嘛。之前我一直以为一个蓝孩子这样对你的话很可能就是不爱你了，要是爱你的话会这么久都没个消息吗？可是后来这样想了以后发现最后难过的还是自己，生气的是我，最后好不容易见面了还会闹的不欢而散。之所以会有这样的想法可能是在这个消息爆炸的时代，看多了类似“男朋友这样做就是不爱你”“爱你的男生都这样做”的毒鸡汤，也可能是看着周边的人每天都和另一半都好甜蜜心里有落差或者是各种因素的影响吧。可是后来我冷静下来一想，觉得有这么严重吗，要这么浮夸吗？动不动就不爱你进行要挟，不联系你是不爱你，不说好听的是不爱你，不陪你是不爱你。那么要怎么样才好，每天什么都不做了，然后陪着你整天卿卿我我就是爱你？或许两种想法都极端了，只是现在已经不像以前了，或许大家都有自己的事情要做。既然这样的话，那就忙的时候各忙各的，该学习学习该工作工作。只是忙完了以后不要再这样下去了，陪一下彼此吧，好不好？跳跃的有点大，说好的六一呢，我是要分享我的六一儿童节的。就在我心神不宁的等他的消息的时候，他问我：上午在哪上课呢？当时真的是有一种泪崩的感觉，就是一种想什么来什么的幸福感，真的，或许在生活中的其他时刻你也体会过这种幸福感，就是你一直在等一个重要的人或者是一个期待的消息，然后忽然这个人出现了，你想听到的消息也传来了。那么就该感动了吧！就是这种心情~当时心里可不是一阵欢呼雀跃，然后心情美美的上了一上午的课。和以前所有一起吃饭的中午一样，我在蓝球场旁边等他过来，可是结果我赚了，我等到的可不是一个人，是一大帮子男生，有认识的还有以前没怎么见过的。然后和以前一样，进餐厅，吃饭。出来的时候Q先生跟我说：去我实验室吹空调吧，太热了~“确实很热，可是下午还有课呢，时间马上就到了，来不及。”“没事，很快的，就一会”“有惊喜？”我很自然的就想到了这个，然后他跟我说“没有，哪有什么惊喜呀！就去一下嘛，待会我送你回去”我一想，会送我回去，那我就去坐一会呗，然后就乖乖的跟着走了~可是这天说来也巧，在楼下的时候居然碰到了DJ老师。然后有一点点子尴尬，我在想老师以后会不会拿谈恋爱占用了学习时间这件事情来怼人。但是又觉得也没有什么呀，巧合巧合纯属巧合，过去了就好过去了就好。然后就上楼了，我一进去就看到了桌子上的小风扇，很mini，很是可爱呢。我正想看一下开关在哪体验一下mini的魅力，刚拿起来还没动它呢就转了起来，正是好奇的时候Q先生过来说：怎么样？神奇吧！只要我的电脑屏幕是亮的它就会开，我一脸的“崇拜”然后很认真的找那个线是连接在哪的。不到3分钟，真的不到3分钟我有看时间的，他就说：走吧，你下午还有课呢。“我不要，说好的吹5分钟呢，还没到时间呢。”说完我还抱怨了一下说这么远过来就让我吹个风扇还这么着急的让我走。但是心里也没有什么不愿意的感觉，感觉去一趟多了在一起的一点点时间也蛮开心的。两分钟很快就到了，该起身走了，我也没注意到他是什么时候从盆栽区拿出了一把百合。然后好像说了一句：这是给你的。还是什么，说实话，其实我没有听清楚，那时候感觉就是有点意外，然后办公室还有别的人在，感觉有点害羞和喜悦，但是又不想让人看出自己有多开心，但是开心到不知道该说什么，感觉站着都觉得害羞。对，就是这样一种感觉。其实倒不是说从来没有收过话收到花有多开心，只是因为这是六一儿童节的礼物我觉得很开心，还真的给我过节呢，有一丝丝的欣喜若狂和骄傲。说到收花，记得收到的第一束玫瑰是高一的时候。那时候某男生追我，晚自习的时候在教室里给了我一束红玫瑰。让我有点措手不及，高一呀，所有小女生都希望有浪漫爱情的时候，遇到这种事情应该是兴奋的不行才对呀。可是，我却把它留在了风中，最可怕的是那个男生还被班主任交出去谈话了。现在想来觉得那个男生还蛮有勇气的，不像我，胆小连早恋都不敢。然后等到现在已经“老了”再来感慨高中的时候都没有谈过恋爱！再后来就是本科的时候了，直到后来看到花我都没有什么感觉了。感觉这束百合重新点燃了我对花的热情，宿舍并没有花瓶，毕竟集体宿舍插花还是不太方便的，个人喜好不一样还有就是有人对花粉还过敏。没有花瓶怎么办呢？我把我装果冻的瓶子空了出来，很用心的把小百合修剪好，然后，拿出了珍藏多时的啤酒，就这样，过了几天，那些花骨朵们也盛开了，由原先零零星星的几朵后来成了一大束。说起来都觉得好有成就感，不愧是我大万载的花儿，生命力旺盛的不得了。还是因为我是你熟悉的人儿所以你开的比较放心呢？
![ ](/images/wenqing/lily.png)
&emsp;&emsp;过完了一个满是惊喜的儿童节以后就是一个快乐的周五了，为啥呢？因为发工资了呀，人生简直不要太完美。再然后就是我最最想写的6月3号了，这个文本我分了好几次写，情绪起起伏伏跌跌落落，好怕到了现在写不出内心深处的那种感觉了。2017年6月3号，周六，晴转多云。下午六点，准时的六点我在你的楼下与你汇合，看到你的那一秒时间刚好跳到18:00，好准时，说好的六点一秒都不差。黑白配，简单干净。我看着觉得很舒服。那天的风特别柔和，吹在脸上暖暖的。我本以为我会有很多想说的话，有很多很多的感觉想要记录，可是写到这的时候我才发现自己什么都写不出来了。对，这件事情确实很特别呀，我第一次带男朋友和同学一起吃饭。吃饭这件事情虽然是平常至极，实在是不值一提。但是见面这件事情却让人觉得有一丝丝的压迫感，可能会和身边的人提起我的partner怎样怎样，但是真正带去见朋友的却不多吧。谁在不确定之前会带着一个异性出现在众人面前说：看，这是我的谁谁谁，以后我们要一直在一起。很冒险的一件事情吧！以前我一直没有这样做就是因为觉得心里不确定，所以一直没有。前段时间我妈还提醒我，你就那么确定要和他在一起吗？晒朋友圈公之于众可是要负责的。我一脸蒙圈呀，不要这样子束缚我嘛。我当然知道这有什么影响，可是现在我的心态不一样了。我不想和以前一样一直低调低调低调，各种低调。我不喜欢呀，我喜欢我就是要说出来，一定要说出来。可能会有很多副作用，但是管它呢？我想要这样做呀，有什么办法？看不到未来没有承诺，那又怎样？谁看得到未来？看到了还有期待吗？还有必要走下去吗？没有承诺，没有承诺又怎样？难道有承诺就会按承诺的发展一步一步的来吗？可是没有承诺的话是不是连这个发展的意愿都没有呀？我也不知道诶，有些时候会这样来安慰自己，可是有些时候真的是连安慰都没有用了。谁知道呢？你喜欢别人对你无微不至的照顾，那你呢？你能给别人提供什么？你能给别人带来什么？快乐，对吗？那就好，快乐。这世界上最珍贵的东西，你若能给予自然是最好的。当然愿你快乐，愿你永远年轻，永远热情，永远热泪盈眶，永远拥抱青春，永远记得初见时的喜悦。或许会遇到很多矛盾和惹你炸毛的事情，但是有一定要记得当初开始的理由，在一起的原因。
&emsp;&emsp;能够抓紧的就别松手，能够拥抱的就别拉扯~如果有什么事情一个拥抱解决不了，那就来两个吧。
&emsp;&emsp;最后，我要加上《凤求凰》
![ ](http://att.bbs.duowan.com/forum/201310/09/142100di8hayairga7grpr.jpg)
&emsp;&emsp;凤兮凤兮归故乡，遨游四海求其皇。 
　　时未遇兮无所将，何悟今兮升斯堂！ 
　　有艳淑女在闺房，室迩人遐毒我肠。 
　　何缘交颈为鸳鸯，胡颉颃兮共翱翔！ 
　　皇兮皇兮从我栖，得托孳尾永为妃。 
　　交情通意心和谐，中夜相从知者谁？ 
　　双翼俱起翻高飞，无感我思使余悲。
　　![ ](http://pic.58pic.com/58pic/15/11/86/18x58PICEwt_1024.jpg)
&emsp;&emsp;心向往之,行必能至。</font>




      
    </div>
    <footer class="article-footer">
      <a data-url="https://evanqiao.github.io/xiaojn-blog/2017/06/05/斜挎包的聚会/" data-id="cjxbtu1og001nqo67e39prmam" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xiaojn-blog/tags/free/">free</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Practical_backTracking" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/xiaojn-blog/2017/06/04/Practical_backTracking/" class="article-date">
  <time datetime="2017-06-04T03:12:36.000Z" itemprop="datePublished">2017-06-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xiaojn-blog/categories/我学编程/">我学编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/xiaojn-blog/2017/06/04/Practical_backTracking/">实践回溯法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="素数环问题"><a href="#素数环问题" class="headerlink" title="素数环问题"></a>素数环问题</h2><p>输入一个整数n，输出所有由1~n排成的环，满足任意两个相邻数之和都是素数。<br>样例输入：<br>6   
样例输出：<br>1 4 3 2 5 6<br>1 6 5 2 3 4<br>（注：输出都以1开头，其他循环的不用输出，如4 3 2 5 6 1）</p>
<p>思路：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">输入n</span><br><span class="line">状态选择：以环的前i个数为状态</span><br><span class="line">void solve(int a[], int i) &#123;</span><br><span class="line">    if(i == n) &#123;</span><br><span class="line">        判断a是否符合素数环条件，符合就输出</span><br><span class="line">    &#125;</span><br><span class="line">    for(a[i] = 1, i &lt;= n; a[i]++) &#123;</span><br><span class="line">        solve(a, i + 1)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">调用solve(0)</span><br></pre></td></tr></table></figure>

<p>solve和search是竞赛中最常出现的函数名称，意为用暴力方法解决问题。</p>
<p>题目的代码为：<a href="https://github.com/Evanqiao/CSTutorship/blob/master/Algorithm/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95/%E7%B4%A0%E6%95%B0%E7%8E%AF%E9%97%AE%E9%A2%98/primering.cpp" target="_blank" rel="noopener">primering.cpp</a></p>
<p>本题目在判断某个数是否是素数时，存在重复的判断，可以进行优化，预先把<code>1 ~ 2n-1</code>的数是否是素数存到一个表中，在使用的时候，不需要再计算，直接查询即可。代码如下所示。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; table;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isPrime</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;    <span class="comment">// 判断质数</span></span><br><span class="line">    <span class="keyword">if</span> (n==<span class="number">1</span> || n==<span class="number">2</span> || (n&gt;<span class="number">2</span> &amp;&amp; n%<span class="number">2</span>==<span class="number">0</span>))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;=<span class="built_in">sqrt</span>(n);i+=<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (n%i==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 回溯法遍历</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> data[],<span class="keyword">int</span> n,<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    cout&lt;&lt;"Seaching: "&lt;&lt;data[1]; // 日志</span></span><br><span class="line"><span class="comment">    for (int j=2;j&lt;=i;j++)&#123;</span></span><br><span class="line"><span class="comment">        cout&lt;&lt;" "&lt;&lt;data[j];</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    cout&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (i==n)&#123;    <span class="comment">// 递归边界，n个数都确定了位置</span></span><br><span class="line">        <span class="keyword">if</span> (table[data[n]+data[<span class="number">1</span>]]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;  <span class="comment">// 最后判断首尾和是不是素数，是的话就找到一个解</span></span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;data[j]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> tmp=data[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j=i;j&lt;=n;j++)&#123;  <span class="comment">// 枚举尚未确定的数字</span></span><br><span class="line">        <span class="keyword">if</span> (table[data[j]+data[i<span class="number">-1</span>]])&#123; <span class="comment">// 剪枝</span></span><br><span class="line">            data[i]=data[j];    <span class="comment">// 交换i,j位的数字</span></span><br><span class="line">            data[j]=tmp;</span><br><span class="line">            search(data,n,i+<span class="number">1</span>);   <span class="comment">// 递归搜索下一个数</span></span><br><span class="line">            data[j]=data[i];    <span class="comment">// 恢复第j位的数字</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    data[i]=tmp;    <span class="comment">// 恢复第i位的数字</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">if</span> (n%<span class="number">2</span>==<span class="number">1</span>) &#123;   <span class="comment">// 预判，也是一种优化</span></span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"Impossible!"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">clock_t</span> start, end;</span><br><span class="line">    start = clock();</span><br><span class="line">    table.reserve(<span class="number">2</span> * n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">2</span> * n; i++) &#123;</span><br><span class="line">        table[i] = isPrime(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> data[n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) &#123;    <span class="comment">// 初始化排列</span></span><br><span class="line">        data[j]=j;</span><br><span class="line">    &#125;</span><br><span class="line">    search(data,n,<span class="number">2</span>);   <span class="comment">// 为什么从2开始？因为循环对称性，第1位固定为1&#125;</span></span><br><span class="line">    end = clock();</span><br><span class="line">    <span class="comment">// 用来统计算法的执行时间</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (end - start) / CLOCKS_PER_SEC &lt;&lt; <span class="string">" s"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="再谈小球下落问题"><a href="#再谈小球下落问题" class="headerlink" title="再谈小球下落问题"></a>再谈小球下落问题</h2><p>$2^D-1$个开关排列成深度为D的二叉树，最初都为关闭状态。有n个小球从顶端依次落下，并遵循如下规则：</p>
<p>如果经过一个关闭的开关，则开关打开，小球落向左侧；<br>如果经过一个打开的开关，则开关关闭，小球落向右侧；<br>输入D，n，输出最后一个小球最终落到的位置。<br>样例输入:<br>4 3<br>样例输出：<br>10</p>
<p>原来的方法是模拟小球下落的过程，具体代码见 <a href="http://blog.xiaojn.cn/2017/05/14/Practical_binaryTree/" target="_blank" rel="noopener">初探二叉树的应用</a> 一文。</p>
<p>&emsp;&emsp;原模拟算法的时间复杂度很高。注意到有这样的规律，节点<code>k</code>左右子节点编号分别为<code>2k</code>和<code>2k+1</code>，每个小球都会落在根结点上，因此前两个小球必然是一个在左子树，一个在右子树。一般地，只需看小球编号的奇偶性，就能知道它是最终在哪棵子树中。对于那些落入根结点左子树的小球来说，只需知道该小球是第几个落在根的左子树里的，就可以知道它下一步往左还是往右了。依此类推，直到小球落到叶子上。<br>&emsp;&emsp;对于编号为<code>id</code>的小球，如果<code>id</code>为奇数，它是往左走的第<code>(id+1)/2</code>个小球，如果<code>id</code>为偶数，它是往右走的第<code>id/2</code>个小球。这样就可以直接模拟出最后一个小球的路线：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> k = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; D - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(n % <span class="number">2</span>) &#123;</span><br><span class="line">        k = k * <span class="number">2</span>;</span><br><span class="line">        n = (n + １) / <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        k = k * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        n /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="八皇后问题"><a href="#八皇后问题" class="headerlink" title="八皇后问题"></a>八皇后问题</h2><p>&nbsp;&nbsp;This one is a classic in computer science. The goal is to assign eight queens to eight positions on an 8x8 chessboard so that no queen, according to the rules of normal chess play, can attack any other queen on the board.<br>In pseudocode, our strategy will be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Start in the leftmost columm</span><br><span class="line">If all queens are placed, return true</span><br><span class="line">for (every possible choice among the rows in this column)</span><br><span class="line">    if the queen can be placed safely there,</span><br><span class="line">        make that choice and then recursively try to place the rest of the queens</span><br><span class="line">        if recursion successful, return true</span><br><span class="line">        if !successful, remove queen and try another row in this column</span><br><span class="line">if all rows have been tried and nothing worked, return false to trigger backtracking</span><br></pre></td></tr></table></figure>

<p><img src="/images/algorithm/backtracking/8queens.png" alt="八皇后问题棋盘状态树"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> NUM_QUEENS = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grid</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T v[NUM_QUEENS][NUM_QUEENS] = &#123; &#123;<span class="number">0</span>&#125; &#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 皇后是按列进行放置的，每列只有一个皇后，本函数是检查前col-1个皇后和现在放置在</span></span><br><span class="line"><span class="comment">     * (col, row) 上的皇后是否冲突</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isSafe</span><span class="params">(<span class="keyword">int</span> col, <span class="keyword">int</span> row)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_QUEENS; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (v[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ( i == row || <span class="built_in">abs</span>(i - row) == <span class="built_in">abs</span>(j - col) )</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> col)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 进入该函数时，前col-1个皇后已经正确的放置在了棋盘上</span></span><br><span class="line">        <span class="keyword">if</span> (col &gt;= NUM_QUEENS) &#123;</span><br><span class="line">            print();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> rowToTry = <span class="number">0</span>; rowToTry &lt; NUM_QUEENS; rowToTry++) &#123;</span><br><span class="line">            v[rowToTry][col] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (isSafe(col, rowToTry)) &#123;</span><br><span class="line">                solve(col + <span class="number">1</span>);     <span class="comment">// recur to place rest</span></span><br><span class="line">            &#125;</span><br><span class="line">            v[rowToTry][col] = <span class="number">0</span>;   <span class="comment">// failed, remove, try again</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Case "</span> &lt;&lt; count++ &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_QUEENS; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; NUM_QUEENS; j++) &#123;</span><br><span class="line">                v[i][j] == <span class="number">1</span> ? <span class="built_in">printf</span>(<span class="string">"%c "</span>, <span class="number">2</span>) : <span class="built_in">printf</span>(<span class="string">". "</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printSimply</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_QUEENS; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; NUM_QUEENS; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(v[i][j] == <span class="number">1</span>)</span><br><span class="line">                    <span class="built_in">cout</span> &lt;&lt; j + <span class="number">1</span> &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Grid&lt;<span class="keyword">bool</span>&gt; board;</span><br><span class="line">    board.solve(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>该算法可进行空间上的优化，初始化一个一维数组<code>matrix[9]</code>，对应的是棋盘中的8行，数组中元素的值代表放置皇后的列，比如如果<code>matrix[i]</code>的值不为0，就表示棋盘第<code>i</code>行，第<code>matrix[i]</code>列放置了一个皇后。代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> matrix[N + <span class="number">1</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isSafe</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> &amp;row, <span class="keyword">const</span> <span class="keyword">int</span> &amp;col)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= row - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">		<span class="keyword">int</span> j = matrix[i];</span><br><span class="line">		<span class="keyword">if</span> (  j == col || <span class="built_in">abs</span>(i - row) == <span class="built_in">abs</span>(j - col) )</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; matrix[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> &amp;row)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//	进入本函数时，在N*N的棋盘前row-1行已放置了互不攻击的row-1个棋子</span></span><br><span class="line">	<span class="comment">//	现从第row行起继续为后续棋子选择合适位置</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (row &gt; N)	<span class="comment">//	输出当前的合法布局</span></span><br><span class="line">		print();</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= N; ++j) &#123;</span><br><span class="line">			matrix[row] = j;</span><br><span class="line">			<span class="keyword">if</span> (isSafe(row, j))</span><br><span class="line">				solve(row + <span class="number">1</span>);</span><br><span class="line">			matrix[row] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">	solve(<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://evanqiao.github.io/xiaojn-blog/2017/06/04/Practical_backTracking/" data-id="cjxbtu1ns000lqo67090mu4a0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xiaojn-blog/tags/Algorithm/">Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-heap_priority_queue" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/xiaojn-blog/2017/05/21/heap_priority_queue/" class="article-date">
  <time datetime="2017-05-21T15:12:36.000Z" itemprop="datePublished">2017-05-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xiaojn-blog/categories/我学编程/">我学编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/xiaojn-blog/2017/05/21/heap_priority_queue/">堆和优先队列的算法应用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="银行排队问题"><a href="#银行排队问题" class="headerlink" title="银行排队问题"></a>银行排队问题</h2><p>有n个人去银行排队办事（n&lt;=1000000）。银行只有一个窗口，每人有不同的优先级。每办完一个人，从等待的人中选优先级最高的人办理，同级选最先到的。<br>输入n以及n行数据Ai，Pi，Ti，表示第i个人的到达时间、优先级、办理用时。所有输入都是正整数，输入顺序为Ai递增顺序，输出实际办理的人的顺序。<br>样例输入：<br>5
0 1 10<br>2 1 10<br>5 3 10<br>7 2 5<br>11 3 5<br>样例输出：<br>1 3 5 4 2</p>
<h3 id="性能一般的方法"><a href="#性能一般的方法" class="headerlink" title="性能一般的方法"></a>性能一般的方法</h3><p>建立一个优先队列，优先队列的优先原则是优先级大的在前，如果优先级相同，则达到时间小的在前，如果到达时间相同，则用时短的在前。设一个变量<code>currentTime</code>用来记录当前的时间，根据当前时间来提取队列中的元素，如果队顶元素不满足要求，先出队，按出队顺序保存在数组中，直到遇到符合条件的元素，就让符合条件的元素去办理业务，完后把数组中保存的元素再入队，循环。。。直到队列为空，即所有人都去办理了业务为止。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Member</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> arrTime;</span><br><span class="line">    <span class="keyword">int</span> priority;</span><br><span class="line">    <span class="keyword">int</span> conTime;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">consructMember</span><span class="params">(Member &amp;m, <span class="keyword">int</span> arrTime, <span class="keyword">int</span> priority, <span class="keyword">int</span> conTime, <span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">    m.arrTime = arrTime;</span><br><span class="line">    m.priority = priority;</span><br><span class="line">    m.conTime = conTime;</span><br><span class="line">    m.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Member &amp;m1, <span class="keyword">const</span> Member &amp;m2) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(m1.priority != m2.priority) &#123;</span><br><span class="line">        <span class="keyword">return</span> m1.priority &lt; m2.priority;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(m1.arrTime != m2.arrTime) &#123;</span><br><span class="line">        <span class="keyword">return</span>  m1.arrTime &gt; m2.arrTime;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span>  m1.conTime &gt; m2.conTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bankQueue(priority_queue&lt;Member&gt; &amp;pq_m, <span class="keyword">int</span> currentTime) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Member&gt; vec_m;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!pq_m.empty()) &#123;</span><br><span class="line">        Member m = pq_m.top();</span><br><span class="line">        <span class="keyword">while</span>(m.arrTime &gt; currentTime) &#123;</span><br><span class="line">            vec_m.push_back(m);</span><br><span class="line">            pq_m.pop();</span><br><span class="line">            m = pq_m.top();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(m.arrTime &lt;= currentTime) &#123;</span><br><span class="line">            pq_m.pop();</span><br><span class="line">            result.push_back(m.id);</span><br><span class="line">            currentTime += m.conTime;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec_m.size(); i++) &#123;</span><br><span class="line">            pq_m.push(vec_m[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        vec_m.clear();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">5</span></span><br><span class="line"><span class="comment">0 1 10</span></span><br><span class="line"><span class="comment">2 1 10</span></span><br><span class="line"><span class="comment">5 3 10</span></span><br><span class="line"><span class="comment">7 2 5</span></span><br><span class="line"><span class="comment">11 3 5</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    Member member[n];</span><br><span class="line">    <span class="keyword">int</span> a, p, c;</span><br><span class="line">    priority_queue&lt;Member&gt; pq_m;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result;</span><br><span class="line">    <span class="keyword">int</span> currentTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; p &gt;&gt; c;</span><br><span class="line">        consructMember(member[i], a, p, c, i + <span class="number">1</span>);</span><br><span class="line">        pq_m.push(member[i]);</span><br><span class="line">        currentTime = i == <span class="number">0</span> ? a : currentTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    result = bankQueue(pq_m, currentTime);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i : result)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>辅导班老师指出这个代码存在的问题：<br>这个算法逻辑上还有一些小bug。<br>首先bankQueue函数里少了一些判断，导致有些输入的时候会死循环<br>另外你这个算法对某些人做了反复出堆和入堆，在某些极端情况下复杂度会到达O(n^2*logn)<br>下面这组数据就会同时触发上面这两件事情<br>    10<br>    0 1 1<br>    2 2 1<br>    4 3 1<br>    6 4 1<br>    8 5 1<br>    10 6 1<br>    12 7 1<br>    14 8 1<br>    16 9 1<br>    18 10 1</p>
<p><strong>修复bug后的代码：</strong> <a href="https://github.com/Evanqiao/CSTutorship/blob/master/Algorithm/bankQueue/bankqueue2.cpp" target="_blank" rel="noopener">bankqueue2.cpp</a></p>
<h3 id="性能更好的方法"><a href="#性能更好的方法" class="headerlink" title="性能更好的方法"></a>性能更好的方法</h3><p>思路：<br>维护两个数据结构，一个是<code>vector</code>，按先来后到的顺序存放每个<code>member</code>，一个是优先队列<code>priority_queue</code>，优先队列的优先原则是优先级大的在前，如果优先级相同，则达到时间小的在前，如果到达时间相同，则用时短的在前。设一个变量<code>currentTime</code>用来记录当前的时间。<br>首先，去访问队列中的成员，如果该成员已经服务过，直接删除，如果没有，则判断该成员是否已经到来，如果到来则访问，并记录他的编号，然后删除。如果队列头元素没有到来，就去<code>vector</code>数组中访问当前游标指向的成员，访问后游标加1，并置访问过的成员的标志为<code>true</code>。
要注意的是:</p>
<ol>
<li>两个数据结构里面存放的都是指针;</li>
<li>相比方法一，<code>Member</code>中添加了一个成员变量<code>isVisited</code>，用来标记当前成员是否已经服务过了。</li>
<li>循环的退出条件是队列为空或者数组已遍历一遍。</li>
</ol>
<p>该算法的时间复杂度相比方法一提高了不少，为<code>O(nlogn)</code>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Member</span> &#123;</span></span><br><span class="line">	<span class="comment">// 依次对应每个成员的到达时间、优先级、消耗时间、编号、是否已经服务过</span></span><br><span class="line">	<span class="keyword">int</span> arrTime;</span><br><span class="line">	<span class="keyword">int</span> priority;</span><br><span class="line">	<span class="keyword">int</span> conTime;</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">bool</span> isVisited;</span><br><span class="line">	<span class="comment">// 构造函数</span></span><br><span class="line">	Member(<span class="keyword">int</span> arrT, <span class="keyword">int</span> p, <span class="keyword">int</span> conT, <span class="keyword">int</span> i, <span class="keyword">bool</span> f) :</span><br><span class="line">		arrTime(arrT), priority(p), conTime(conT), id(i), isVisited(f) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义自己的比较函数</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mycmp</span> &#123;</span></span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">(<span class="keyword">const</span> Member* m1, <span class="keyword">const</span> Member* m2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(m1-&gt;priority != m2-&gt;priority) &#123;</span><br><span class="line">			<span class="keyword">return</span> m1-&gt;priority &lt; m2-&gt;priority;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span>(m1-&gt;arrTime != m2-&gt;arrTime) &#123;</span><br><span class="line">			<span class="keyword">return</span>  m1-&gt;arrTime &gt; m2-&gt;arrTime;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span>  m1-&gt;conTime &gt; m2-&gt;conTime;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bankQueue(priority_queue&lt;Member*, <span class="built_in">vector</span>&lt;Member*&gt;, mycmp&gt; &amp;pq_m, Member *pmem[], <span class="keyword">int</span> n) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result;</span><br><span class="line">	<span class="keyword">if</span>(n == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	<span class="keyword">int</span> currentTime = pmem[<span class="number">0</span>]-&gt;arrTime;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i &lt; n &amp;&amp; pq_m.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		Member *m = pq_m.top();</span><br><span class="line">		<span class="keyword">if</span>(m-&gt;isVisited) &#123;</span><br><span class="line">			pq_m.pop();</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(m-&gt;arrTime &lt;= currentTime) &#123;</span><br><span class="line">			m-&gt;isVisited = <span class="literal">true</span>;</span><br><span class="line">			result.push_back(m-&gt;id);</span><br><span class="line">			currentTime += m-&gt;conTime;</span><br><span class="line">			pq_m.pop();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(pmem[i]-&gt;isVisited == <span class="literal">false</span>) &#123;</span><br><span class="line">				result.push_back(pmem[i]-&gt;id);</span><br><span class="line">				pmem[i]-&gt;isVisited = <span class="literal">true</span>;</span><br><span class="line">				currentTime += pmem[i]-&gt;conTime;</span><br><span class="line">			&#125;</span><br><span class="line">			i++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   5</span></span><br><span class="line"><span class="comment">   0 1 10</span></span><br><span class="line"><span class="comment">   2 1 10</span></span><br><span class="line"><span class="comment">   5 3 10</span></span><br><span class="line"><span class="comment">   7 2 5</span></span><br><span class="line"><span class="comment">   11 3 5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">	Member *pmember[n];</span><br><span class="line">	<span class="keyword">int</span> a, p, c;</span><br><span class="line">	<span class="comment">// 定义优先队列</span></span><br><span class="line">	priority_queue&lt;Member*, <span class="built_in">vector</span>&lt;Member*&gt;, mycmp&gt; pq_m;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; result;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; p &gt;&gt; c;</span><br><span class="line">		pmember[i] = <span class="keyword">new</span> Member(a, p, c, i + <span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line">		pq_m.push(pmember[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	result = bankQueue(pq_m, pmember, n);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i : result)</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="堆排序的原理与特性"><a href="#堆排序的原理与特性" class="headerlink" title="堆排序的原理与特性"></a>堆排序的原理与特性</h2><p>这部分我之前总结过。详见<a href="http://blog.xiaojn.cn/2016/08/25/%E5%85%B8%E5%9E%8B%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%9B%9E%E9%A1%BE/#7-堆排序" target="_blank" rel="noopener">典型排序算法 - 堆排序</a><br>堆排序动态示例：<br><img src="https://upload.wikimedia.org/wikipedia/commons/4/4d/Heapsort-example.gif" alt="堆排序升序排列"></p>
<h2 id="堆排序实现"><a href="#堆排序实现" class="headerlink" title="堆排序实现"></a>堆排序实现</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><ol>
<li>在原数组上建立最小堆；</li>
<li>交换数组的第一个元素和最后一个元素；</li>
<li>维护最小堆；</li>
<li>重复2-3步骤直到完成数组中所有元素的排序。  </li>
</ol>
<p>此方法的时间复杂度为O(nlogn)，空间复杂度为O(1)。<br><strong>提示：</strong>建堆的方法和过程参考上面给出的堆排序的链接。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeapSort</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n &lt; <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        buildMinHeap(A, n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="built_in">std</span>::swap(A[<span class="number">0</span>], A[i]);</span><br><span class="line">            heap_size--;</span><br><span class="line">            minHeapify(A, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">minHeapify</span><span class="params">(<span class="keyword">int</span> A[],<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> left = <span class="number">2</span> * index + <span class="number">1</span>;</span><br><span class="line">    	<span class="keyword">int</span> right = <span class="number">2</span> * index + <span class="number">2</span>;</span><br><span class="line">    	<span class="keyword">int</span> lowest = <span class="number">0</span>;</span><br><span class="line">    	<span class="keyword">if</span>(left &lt; heap_size &amp;&amp; A[left] &lt; A[index]) &#123;</span><br><span class="line">            lowest = left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            lowest = index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(right &lt; heap_size &amp;&amp; A[right] &lt; A[lowest])</span><br><span class="line">            lowest = right;</span><br><span class="line">        <span class="keyword">if</span>(lowest != index) &#123;</span><br><span class="line">        	<span class="built_in">std</span>::swap(A[index], A[lowest]);</span><br><span class="line">        	minHeapify(A, lowest);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildMinHeap</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    	heap_size = n;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> i = (n - <span class="number">2</span>) / <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            minHeapify(A, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> heap_size = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> A[] = &#123;<span class="number">9</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">19</span>, <span class="number">8</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="keyword">sizeof</span>(A) / <span class="keyword">sizeof</span>(<span class="keyword">int</span>);</span><br><span class="line">    HeapSort h;</span><br><span class="line">    h.heapSort(A, n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> e : A) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="string">"  "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><ol>
<li>在原数组上建立最大堆；</li>
<li>把数组的第一个元素放入新的数组中，把数组最后一个元素赋值给第一个元素；</li>
<li>维护最大堆；</li>
<li>重复2-3步骤直到完成数组中所有元素的排序。  </li>
</ol>
<p>此方法的时间复杂度为O(nlogn)，空间复杂度为O(n)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeapSort</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span> A[], <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;B, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n &lt; <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        buildMaxHeap(A, n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">            B.push_back(A[<span class="number">0</span>]);</span><br><span class="line">            A[<span class="number">0</span>] = A[i];</span><br><span class="line">            heap_size--;</span><br><span class="line">            maxHeapify(A, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">maxHeapify</span><span class="params">(<span class="keyword">int</span> A[],<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> left = <span class="number">2</span> * index + <span class="number">1</span>;</span><br><span class="line">    	<span class="keyword">int</span> right = <span class="number">2</span> * index + <span class="number">2</span>;</span><br><span class="line">    	<span class="keyword">int</span> largest = <span class="number">0</span>;</span><br><span class="line">    	<span class="keyword">if</span>(left &lt; heap_size &amp;&amp; A[left] &gt; A[index]) &#123;</span><br><span class="line">            largest = left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            largest = index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(right &lt; heap_size &amp;&amp; A[right] &gt; A[largest])</span><br><span class="line">            largest = right;</span><br><span class="line">        <span class="keyword">if</span>(largest != index) &#123;</span><br><span class="line">        	<span class="built_in">std</span>::swap(A[index], A[largest]);</span><br><span class="line">        	maxHeapify(A, largest);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildMaxHeap</span><span class="params">(<span class="keyword">int</span> A[], <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    	heap_size = n;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">int</span> i = (n - <span class="number">2</span>) / <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            maxHeapify(A, i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> heap_size = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> A[] = &#123;<span class="number">7</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">19</span>, <span class="number">8</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="keyword">sizeof</span>(A) / <span class="keyword">sizeof</span>(<span class="keyword">int</span>);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; B;</span><br><span class="line">    HeapSort h;</span><br><span class="line">    h.heapSort(A, B, n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> e : B) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="string">"  "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h3><p>按照课堂上老师的代码进行修改，先建立一个最大堆，然后依次打印出堆顶元素。</p>
<p><strong>提示：</strong>这里的代码不一定是最好的，也不一定非要建立一个最大堆。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MaxHeap</span>&#123;</span></span><br><span class="line"><span class="keyword">private</span>:  <span class="comment">// private表示只有在class内部可访问</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; data;   <span class="comment">// 数据，因为是满二叉树，用数组存就可以</span></span><br><span class="line">    <span class="keyword">int</span> capacity,size;  <span class="comment">// 最大容量，实际数量</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> &amp;b)</span></span>&#123;   <span class="comment">// 交换整数辅助函数</span></span><br><span class="line">        a=a+b;</span><br><span class="line">        b=a-b;</span><br><span class="line">        a=a-b;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 从节点i开始恢复堆的特性</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">recover</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i&gt;<span class="number">1</span> &amp;&amp; data[i/<span class="number">2</span>]&lt;data[i])&#123;</span><br><span class="line">            swap(data[i/<span class="number">2</span>],data[i]);</span><br><span class="line">            recover(i/<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i*<span class="number">2</span>+<span class="number">1</span>&lt;=size &amp;&amp; data[i*<span class="number">2</span>+<span class="number">1</span>]&gt;data[i] &amp;&amp; data[i*<span class="number">2</span>+<span class="number">1</span>]&gt;=data[i*<span class="number">2</span>])&#123; <span class="comment">// 右子树最大</span></span><br><span class="line">            swap(data[i*<span class="number">2</span>+<span class="number">1</span>],data[i]);</span><br><span class="line">            recover(i*<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i*<span class="number">2</span>&lt;=size &amp;&amp; data[i*<span class="number">2</span>]&gt;data[i] &amp;&amp; (i*<span class="number">2</span>+<span class="number">1</span>&gt;size || data[i*<span class="number">2</span>]&gt;data[i*<span class="number">2</span>+<span class="number">1</span>]))&#123; <span class="comment">// 左子树最大</span></span><br><span class="line">            swap(data[i*<span class="number">2</span>],data[i]);</span><br><span class="line">            recover(i*<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    </span><br><span class="line">    MaxHeap(<span class="keyword">const</span> <span class="keyword">int</span>&amp; n)&#123; <span class="comment">// 初始化</span></span><br><span class="line">        data.empty();</span><br><span class="line">        capacity=<span class="number">1</span>&lt;&lt;n;</span><br><span class="line">        size=<span class="number">0</span>;</span><br><span class="line">        data.reserve(capacity);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">removeRoot</span><span class="params">()</span> </span>&#123;  <span class="comment">// 删除根节点并返回其值</span></span><br><span class="line">        <span class="keyword">int</span> root= data[<span class="number">1</span>];</span><br><span class="line">        data[<span class="number">1</span>]=data[size--];</span><br><span class="line">        recover(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> value)</span></span>&#123; <span class="comment">// 新增一个元素</span></span><br><span class="line">        data[++size]=value;</span><br><span class="line">        recover(size);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;   <span class="comment">// 用友好的方式输出堆的内容</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=size;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> left=i*<span class="number">2</span>&lt;=size?data[i*<span class="number">2</span>]:<span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">int</span> right=i*<span class="number">2</span>+<span class="number">1</span>&lt;=size?data[i*<span class="number">2</span>+<span class="number">1</span>]:<span class="number">-1</span>;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;data[i]&lt;&lt;<span class="string">"("</span>&lt;&lt;left&lt;&lt;<span class="string">","</span>&lt;&lt;right&lt;&lt;<span class="string">")"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span> data[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> level=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&gt;<span class="number">0</span>; i&gt;&gt;=<span class="number">1</span>,level++); <span class="comment">// 计算能容纳n个节点的堆的高度</span></span><br><span class="line">    <span class="function">MaxHeap <span class="title">heap</span><span class="params">(level)</span></span>;    <span class="comment">// 初始化堆</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;  <span class="comment">// 入堆</span></span><br><span class="line">        heap.insert(data[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> max = heap.removeRoot(); <span class="comment">// 取出堆顶元素，即最大的元素</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; max &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">/*9</span></span><br><span class="line"><span class="comment">     4 3 5 7 11 90 7 29 3*/</span></span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">int</span> data[n];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;data[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    heapSort(data, n);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://evanqiao.github.io/xiaojn-blog/2017/05/21/heap_priority_queue/" data-id="cjxbtu1o70017qo67o0m53ich" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xiaojn-blog/tags/Algorithm/">Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-The_first_one" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/xiaojn-blog/2017/05/14/The_first_one/" class="article-date">
  <time datetime="2017-05-14T15:17:45.000Z" itemprop="datePublished">2017-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xiaojn-blog/categories/文清说/">文清说</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/xiaojn-blog/2017/05/14/The_first_one/">The First One</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&emsp;&emsp;这个文档我编辑了好多次，试过了用不同的故事不同的风格来开始，可是好像终究还是没有找到觉得适合的一个。越是重视就越不知道该说什么，越是无所适从。文清说是我要求博主帮我弄的一个专栏，可是却迟迟都没有开动，一直是空的，心里总觉得有略略的愧疚，于是乎有了The first one.对了，忘了说。“文清说”，文清是谁？是我，我是文清。</p>
<p>&emsp;&emsp;现在是2017年5月14号晚11:16，周围都很安静，室友都睡了，却也隐隐约约的可以听到丽娃食堂传来发动机的嗡嗡声。换做以前我肯定是在呼呼大睡，不知道是梦着什么好吃的还是什么开心的事情，有时候在梦里也会笑出来的那种。有些时候我也很好奇，到底是什么事情可以开心成这样？</p>
<p>&emsp;&emsp;今天是母亲节，本来是个好好的日子，如果可以的话选择陪陪亲爱的妈妈或者是打个电话视个频什么的也是好的。可是就像每个节日一样，朋友圈里出现了一群晒妈狂魔，各种妈妈辛苦了，妈妈我爱你！然后也有看到很有趣的一句话，是这样说的：你们的妈我都认识了，下个月要认识你们的爸了。刚看到时忍不住笑出了声，为这句话中的挑逗而笑。如果是以前我可能会觉得人家不就发个朋友圈表达一下母子情深嘛，干嘛这么针对？可是现在却觉得：嗯，说的漂亮。也就是这样的一句话，让我想起近期在微博上看到的一个短视频，标题是：孩子为什么需要爸爸。内容讲的大致是发生在美国儿童团体中的霸凌，一个芭蕾舞中，A总是故意绊倒B，而B呢也总是隐忍着，然后被老师批评，在表演的过程中出丑。这一幕被B的爸爸看到了，回家的路上爸爸问他：为什么不反抗？B说：你不让我反抗，你告诉过我要用和平的方式解决。而这个父亲说的话却让我觉得没错，这才是亲爸！他说：去他妈的和平解决，你要保护自己，下回记得给她点颜色看看。然后在下一次芭蕾舞的课上，当A想要使同样的手段时，B不再是乖乖的任她欺负，而是一个漂亮的反击把A撂倒在地上。然后她爸在下面说：看到没，那是我女儿，干的漂亮，我觉得你今天表现很不错，继续跳吧。当时我瞬间就觉得干的漂亮，就应该这样子。可能你会说母亲节和这有什么关系？对，确实没有什么关系，那，难道和父亲节有关系？哈哈，NO!只是刚好想起，就记录上去了。有些时候就是这样毫无逻辑，天马行空。但是自由呀，开心呀~有些时候我实在是不理解为什么有的父母在教育的孩子的时候会说：当你的同学欺负你时，不要自己解决，要向老师反映，要跟爸爸妈妈说。可是，可怜的孩子呀，当你遇到事情的时候你向他们求助真的有得到反馈吗？为什么不直接告诉ta，要是对方太过分就直接给ta点“颜色”看看。这个话题感觉有点像前段时间大家争论的：如果孩子受到了欺负，家长要不要在孩子面前和对发放直接开撕？撕呀，为什么不撕？连自己的孩子都不保护或者说让你的孩子觉得你保护不了他难道不是比在孩子面前维持那种假惺惺的“和平者”姿态更不值当吗？有问题就解决呀，撕就撕，谁怕谁？哎呀，话题跑的有点远。</p>
<p>&emsp;&emsp;再记录一件好玩的事情，今天和我家小可爱去餐厅的时候，餐厅的电视机没有开，显得有几分寂静。我家小可爱问我相不相信他可以把电视机开开。我说不信，如果说信的话那肯定就是骗你的。然后他默默的掏出了他的小米手机，愣是真的把电视开开了。原谅我的无知，我当时真的觉得好崇拜呀，以为是他自己编的程序啥的可以实现这个功能，后来才知道是掏出来搞事情的小米手机的功劳。但是还是觉得很欢乐！大多数时候生活都是很平淡的，每天都是这样，没有什么太大的变化。但是，还是会有很多有趣的事情发生，当时你会觉得很开心，但是也很容易把这些开心的事情忘掉。时间真的是可以冲刷掉很多东西，可以让你忘记烦恼也可以带走快乐。所以我觉得“文清说”存在的意义不是写多少文采飞扬或者个性鲜明的好文吧。只是记录生活，记录生活中让我心动的瞬间，记录每一个快乐但是容易忘记的时刻。</p>
<p>&emsp;&emsp;我很怀念刚来上海住在破旧的华夏的日子，那时候刚失恋没多久，也顺利的摆脱了接了半年的个案。来到一个完全陌生的城市，身边都是陌生的人，但是幸好都是有趣的人，那时候是只单身汪，但是确实前所未有的轻松与快乐，每天把培训的内容弄弄清楚，一周考试一次，每次考完试就和新伙伴出去浪，还有就是睡觉，那两个月是我睡的最安稳的时候，用她们吐槽的话来说就是：好能睡呀，一睡可以一直睡到吃晚饭的点。每次她们都会把我叫醒，别睡了，晚上怎么办。可是一到晚上却还是呼呼大睡，感觉没有任何的压力，再也不会有升学的压力了，对我来说就是那时的安稳与轻松之源吧。<br>&emsp;&emsp;后来一次偶然的机会遇到Q先生，不知道是怎么了，疯狂的沉迷，那时候的感觉真的是满满的甜蜜与少女心，当然很有可能是我当方面这样觉得，那时候印象最深刻的一种感受就是：哇，空气是甜的诶<del>哈哈，但是一个人可以给你带来多大的快乐就可以给你带去多大的伤害与痛苦，因为你爱上他的时候就已经赋予了他伤害你的权利，或许你的存在就是为了去伤害地球上某一个角落的某一个人。遇到他以后，体验到了前所未有的快乐，也体验到了前所未有的无助感与失落感。有时候觉得安全感满满，有时候也会担心这担心那，但是又有什么用呢？有些时候自己一个人郁闷了老半天最后在看到他的那一眼就忍不住的想笑，然后带走了所有的负面情绪。对诶，我每次看到你就想笑，我也不知道为什么，没有什么理由。看到你就开心，如果你陪我一小时不能带走烦恼带来快乐那就再陪一小时，有什么事情是陪伴不能解决的？<br>&emsp;&emsp;你马上就要去实习，其中的奔波于忙碌我自然是可以理解。理性的来想我也知道，嗯，该为毕业做准备了。可是天知道我有多不想让你去！我不想连着好几天都见不到你，甚至害怕一忙起来就忽略和冷落了彼此。说这些还不是因为只是想要和你在一起</del><br>&emsp;&emsp;以上，晚安！下回再和你细聊，和你分享心的小确幸~sweet dream.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://evanqiao.github.io/xiaojn-blog/2017/05/14/The_first_one/" data-id="cjxbtu1nz000xqo67o9dmz8js" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xiaojn-blog/tags/May/">May</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-来玩一下超声波测距" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/xiaojn-blog/2017/05/14/来玩一下超声波测距/" class="article-date">
  <time datetime="2017-05-14T11:48:36.000Z" itemprop="datePublished">2017-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xiaojn-blog/categories/我学编程/">我学编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/xiaojn-blog/2017/05/14/来玩一下超声波测距/">来玩一下超声波测距</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="HC-SR04"><a href="#HC-SR04" class="headerlink" title="HC-SR04"></a>HC-SR04</h2><p><img src="/images/raspberry/raspberry_HC-SR04.png" alt="HC-SR04介绍"></p>
        
          <p class="article-more-link">
            <a href="/xiaojn-blog/2017/05/14/来玩一下超声波测距/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://evanqiao.github.io/xiaojn-blog/2017/05/14/来玩一下超声波测距/" data-id="cjxbtu1oh001qqo67acy3ak11" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xiaojn-blog/tags/Raspberry/">Raspberry</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Practical_binaryTree" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/xiaojn-blog/2017/05/14/Practical_binaryTree/" class="article-date">
  <time datetime="2017-05-14T03:12:36.000Z" itemprop="datePublished">2017-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/xiaojn-blog/categories/我学编程/">我学编程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/xiaojn-blog/2017/05/14/Practical_binaryTree/">初探二叉树的应用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="树的性质"><a href="#树的性质" class="headerlink" title="树的性质"></a>树的性质</h2><p><img src="/images/tree_property.png" alt="树的性质"></p>
        
          <p class="article-more-link">
            <a href="/xiaojn-blog/2017/05/14/Practical_binaryTree/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://evanqiao.github.io/xiaojn-blog/2017/05/14/Practical_binaryTree/" data-id="cjxbtu1nu000pqo67cc6a4lpw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/xiaojn-blog/tags/Algorithm/">Algorithm</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/xiaojn-blog/page/2/">2</a><a class="page-number" href="/xiaojn-blog/page/3/">3</a><a class="extend next" rel="next" href="/xiaojn-blog/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/xiaojn-blog/categories/Tools/">Tools</a></li><li class="category-list-item"><a class="category-list-link" href="/xiaojn-blog/categories/博客建设/">博客建设</a></li><li class="category-list-item"><a class="category-list-link" href="/xiaojn-blog/categories/我学编程/">我学编程</a></li><li class="category-list-item"><a class="category-list-link" href="/xiaojn-blog/categories/文清说/">文清说</a></li><li class="category-list-item"><a class="category-list-link" href="/xiaojn-blog/categories/算法/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/xiaojn-blog/categories/编程语言/">编程语言</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/Algorithm/">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/MarkDown/">MarkDown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/Mathematics/">Mathematics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/May/">May</a></li><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/Raspberry/">Raspberry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/free/">free</a></li><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/xiaojn-blog/tags/vim/">vim</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/xiaojn-blog/tags/Algorithm/" style="font-size: 20px;">Algorithm</a> <a href="/xiaojn-blog/tags/C/" style="font-size: 13.33px;">C++</a> <a href="/xiaojn-blog/tags/MarkDown/" style="font-size: 10px;">MarkDown</a> <a href="/xiaojn-blog/tags/Mathematics/" style="font-size: 13.33px;">Mathematics</a> <a href="/xiaojn-blog/tags/May/" style="font-size: 10px;">May</a> <a href="/xiaojn-blog/tags/Raspberry/" style="font-size: 16.67px;">Raspberry</a> <a href="/xiaojn-blog/tags/free/" style="font-size: 10px;">free</a> <a href="/xiaojn-blog/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/xiaojn-blog/tags/vim/" style="font-size: 10px;">vim</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/xiaojn-blog/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/xiaojn-blog/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/xiaojn-blog/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/xiaojn-blog/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/xiaojn-blog/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/xiaojn-blog/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/xiaojn-blog/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/xiaojn-blog/archives/2016/05/">五月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/xiaojn-blog/2017/07/30/NOIP2013_2表达式求值/">NOIP2013表达式求值</a>
          </li>
        
          <li>
            <a href="/xiaojn-blog/2017/07/30/NOIP2012_02寻宝/">NOIP2012寻宝</a>
          </li>
        
          <li>
            <a href="/xiaojn-blog/2017/06/05/斜挎包的聚会/">跨斜包的聚会</a>
          </li>
        
          <li>
            <a href="/xiaojn-blog/2017/06/04/Practical_backTracking/">实践回溯法</a>
          </li>
        
          <li>
            <a href="/xiaojn-blog/2017/05/21/heap_priority_queue/">堆和优先队列的算法应用</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 qiaoyihan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/xiaojn-blog/" class="mobile-nav-link">Home</a>
  
    <a href="/xiaojn-blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/xiaojn-blog/fancybox/jquery.fancybox.css">
  <script src="/xiaojn-blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/xiaojn-blog/js/script.js"></script>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>